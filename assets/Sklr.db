BEGIN TRANSACTION;

-- Table structure for table `users`
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  username TEXT NOT NULL,
  email TEXT NOT NULL UNIQUE,
  password TEXT NOT NULL,
  phone_number TEXT UNIQUE,
  first_name TEXT,
  last_name TEXT,
  age INTEGER,
  gender TEXT CHECK(gender IN ('Male', 'Female', 'Other')),
  bio TEXT,
  credits INTEGER DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Dumping data for table `users`
INSERT INTO users (id, username, email, password, phone_number, first_name, last_name, age, gender, bio, credits, created_at, updated_at) VALUES
(1, 'john_doe', 'john.doe@example.com', 'hashed_password_1', '+1 123 456 789', 'John', 'Doe', 25, 'Male', 'I love mathematics!', 2, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(2, 'jane_smith', 'jane.smith@example.com', 'hashed_password_2', '+1 987 654 321', 'Jane', 'Smith', 28, 'Female', 'I love object oriented programming!', 1, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(3, 'sam_wilson', 'sam.wilson@example.com', 'hashed_password_3', '+1 147 258 369', 'Sam', 'Wilson', 30, 'Male', 'I love cooking!', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(4, 'lisa_jones', 'lisa.jones@example.com', 'hashed_password_4', '+39 567 890 123', 'Lisa', 'Jones', 22, 'Female', 'AI is going to take over the world, mark my words', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(5, 'michael_brown', 'michael.brown@example.com', 'hashed_password_5', '+39 321 987 654', 'Michael', 'Brown', 35, 'Male', 'I am Michael, Michael Brown', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(6, 'anna_white', 'anna.white@example.com', 'hashed_password_6', '+49 555 231 519', 'Anna', 'White', 27, 'Female', 'Welcome to my profile page!', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(7, 'david_lee', 'david.lee@example.com', 'hashed_password_7', '+82 013 492 102', 'David', 'Lee', 29, 'Male', 'Welcome to my profile page!', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(8, 'susan_clark', 'susan.clark@example.com', 'hashed_password_8', '+63 215 581 238', 'Susan', 'Clark', 24, 'Female', 'Welcome to my profile page!', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(9, 'paul_adams', 'paul.adams@example.com', 'hashed_password_9', '+1 569 285 056', 'Paul', 'Adams', 32, 'Male', 'Welcome to my profile page!', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44'),
(10, 'nina_green', 'nina.green@example.com', 'hashed_password_10', '+34 724 525 039', 'Nina', 'Green', 26, 'Female', 'Welcome to my profile page!', 0, '2024-12-30 14:59:44', '2024-12-30 14:59:44');

-- Table structure for table `notifications`
CREATE TABLE notifications (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER,
  message TEXT NOT NULL,
  is_read BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users (id)
);

-- Dumping data for table `notifications`
INSERT INTO notifications (id, user_id, message, is_read, created_at) VALUES
(1, 1, 'You have a pending request!', false, '2024-12-30 14:59:44'),
(2, 4, 'You have a pending request!', false, '2024-12-30 14:59:44'),
(3, 2, 'You have received a credit!', false, '2024-12-30 14:59:44');

-- Table structure for table `Skills`
CREATE TABLE skills (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER,
  skill_name TEXT NOT NULL,
  skill_description TEXT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users (id)
);

-- Dumping data for table `skills`
INSERT INTO skills (id, user_id, skill_name, skill_description, created_at) VALUES
(1, 1, 'Discrete Mathematics', 'I will teach you the basics of discrete mathematics', '2024-12-30 14:59:44'),
(2, 2, 'C# Programming', 'I will teach you the basics of programming in C#', '2024-12-30 14:59:44'),
(3, 3, 'Swedish Cooking', 'I will teach you how to cook some classic swedish meals', '2024-12-30 14:59:44'),
(4, 4, 'LLM Basics', 'I will teach you about the basics of a large language model (LLM)', '2024-12-30 14:59:44');

-- Table structure for table `sessions`
CREATE TABLE sessions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  requester_id INTEGER,
  provider_id INTEGER,
  skill_id INTEGER,
  session_date DATETIME,
  duration_minutes INTEGER,
  status TEXT DEFAULT 'Pending',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (requester_id) REFERENCES users (id),
  FOREIGN KEY (provider_id) REFERENCES users (id),
  CHECK (requester_id != provider_id),
  FOREIGN KEY (skill_id) REFERENCES skills (id)
);

-- Dumping data for table `sessions`
INSERT INTO sessions (id, requester_id, provider_id, skill_id, session_date, duration_minutes, status, created_at) VALUES
(1, 3, 1, 1, '2025-01-10 15:00:00', 60, 'Pending', '2024-12-30 14:59:44'),
(2, 1, 4, 4, '2025-01-12 18:30:00', 120, 'Pending', '2024-12-30 14:59:44'),
(3, 9, 2, 2, '2024-12-24 12:30:00', 45, 'Completed', '2024-12-24 13:15:00');

-- Table structure for table `transactions`
CREATE TABLE transactions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER,
  session_id INTEGER,
  credit_change INTEGER,
  transaction_type TEXT NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users (id),
  FOREIGN KEY (session_id) REFERENCES sessions (id)
);

-- Dumping data for table `transactions`
INSERT INTO transactions (id, user_id, session_id, credit_change, transaction_type, created_at) VALUES
(1, 2, 2, 1, 'Teaching', '2024-12-30 14:59:44');

-- Table structure for table `reviews`
CREATE TABLE reviews (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id INTEGER,
  reviewer_id INTEGER,
  reviewee_id INTEGER,
  rating INTEGER CHECK (rating BETWEEN 1 AND 5),
  review_text TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (session_id) REFERENCES sessions (id),
  FOREIGN KEY (reviewer_id) REFERENCES users (id),
  FOREIGN KEY (reviewee_id) REFERENCES users (id),
  CHECK (reviewer_id != reviewee_id)
);

-- Dumping data for table `reviews`
INSERT INTO reviews (id, session_id, reviewer_id, reviewee_id, rating, review_text, created_at) VALUES
(1, 2, 7, 2, 4, 'Great explanations and real life examples, wish we had more time', '2024-12-30 14:59:44');

--Table structure for table 'chats'
CREATE TABLE IF NOT EXISTS chats (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user1_id INTEGER NOT NULL,
    user2_id INTEGER NOT NULL,
    last_message TEXT,
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(user1_id) REFERENCES users(id),
    FOREIGN KEY(user2_id) REFERENCES users(id)
);

-- Dumping data for table 'chats'
INSERT INTO chats (user1_id, user2_id, last_message, last_updated)
VALUES 
(1, 2, 'Hello, how are you?', CURRENT_TIMESTAMP),
(2, 3, 'Are we meeting tomorrow?', CURRENT_TIMESTAMP);

--Table structure for table 'messages'
CREATE TABLE IF NOT EXISTS messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    chat_id INTEGER NOT NULL,
    sender_id INTEGER NOT NULL,
    message TEXT NOT NULL,
    timestamp TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY(chat_id) REFERENCES Chats(id),
    FOREIGN KEY(sender_id) REFERENCES users(id)
);

-- Dumping data for table 'messages'
INSERT INTO Messages (chat_id, sender_id, message)
VALUES 
(1, 1, 'Hello, how are you?'),
(1, 2, 'I am good, thanks! How about you?'),
(1, 1, 'I am doing well too.'),
(2, 2, 'Are we meeting tomorrow?'),
(2, 3, 'Yes, same time and place!');

COMMIT;
